name = "vinet-ops"
main = "src/index.js"
compatibility_date = "2024-11-20"
account_id = "0ba56c77d4b26cfe73302244e6df2a5d"  # your existing CF account

# Routes – single worker, multiple subdomains
[[routes]]
pattern = "new.vinet.co.za/*"
zone_name = "vinet.co.za"

[[routes]]
pattern = "dash.vinet.co.za/*"
zone_name = "vinet.co.za"

[[routes]]
pattern = "agent.vinet.co.za/*"
zone_name = "vinet.co.za"

[vars]
# Splynx
SPLYNX_URL = "https://splynx.vinet.co.za"
AUTH_HEADER = "Basic NTcxMDRhNGJjNjhhY2Y2MjRkMDliMmYwOTQ1ZTI1M2E6N2UyOTNmY2QyNzBjODJmOTdjNWQzODUwZjdhM2I1MTE="

# Turnstile – add these from your dashboard
TURNSTILE_SITE_KEY = "0x4AAAAAABxWz1R1NnIj1POM"
TURNSTILE_SECRET_KEY = "0x4AAAAAABxWz9bB2HqidAUtWOweMHAaLxk"

# SSO / cookies
SSO_SECRET = "|@8?`<lt6j3)klfs}Gb%:;z=*Oe!^72pfb)t9toBS'HLxs@Hf,q)J?h,5_/9$W"   # at least 32+ chars
COOKIE_DOMAIN = ".vinet.co.za"

# R2 – public base path for images
R2_PUBLIC_BASE = "https://pub-2b51d87721ec494a89dba402ec3b3950.r2.dev"

# WhatsApp Cloud API (OTP + notifications)
WHATSAPP_TOKEN = "EAALpZCXUFpXsBP4SCZAtADZCbyZCT6oVr0yxURa0lZBpX2FFkUZBDYxwGbYOpyWggvxX2l8T1zTqanUtLTl58mC0mJw8vJyRrvKvoI9ZCkxmFPmlvBaaJBR2mI1IQynm9xgkx1GWaPhinLCS9Dkc1EymcXd6A9PLwSRuAGPmpaK4lEFPIrN1asZBbo7P4ZCHxxViILAZDZD"
PHONE_NUMBER_ID = "104043025887306"
BUSINESS_ID = "416413345495591"
WA_TEMPLATE_OTP = "vinet_otp"
WA_TEMPLATE_NOTIFY = "vinet_notify"
WA_ADMIN_MSISDN = "27718878933"  # your admin WA MSISDN

# Splynx inventory defaults for quick-assign
INVENTORY_STORE_ID = "1"
INVENTORY_MOVE_TYPE_ID = "1"

[triggers]
crons = ["0 2 * * *"]  # nightly tariff import

[[d1_databases]]
binding = "DB"
database_name = "vinet-ops"
database_id = "ae895972-63bb-4955-8289-49e045d35cee"

[[r2_buckets]]
binding = "OPS_MEDIA"
bucket_name = "ops-media"

[[kv_namespaces]]
binding = "RATE_KV"
id = "e5334fdde3524ea78d5dde97c2a6af59"

[[kv_namespaces]]
binding = "COVERAGE_KV"
id = "03f9082eb4654e5c8cc238d0b80b025f"  # your existing COVERAGE_KV

[[kv_namespaces]]
binding = "AUTH_KV"
id = "cf45a7c354764274b13d27d6f5307195"
